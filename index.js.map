{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst apiKey = '48552658-8d0576f2bce30f826d9dd5e42';\n\nconst searchInput = document.querySelector('.search-input');\nconst searchButton = document.querySelector('.search-button');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet page = 1;\nlet totalHits = 0; // Toplam sonuç sayısını takip etmek için\n\nsearchButton.addEventListener('click', () => {\n  const query = searchInput.value.trim();\n  if (query) {\n    page = 1; // Yeni aramada sayfa sıfırlanmalı\n    fetchImages(query);\n  } else {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a valid search term!',\n      position: 'topRight'\n    });\n  }\n});\n\nloadMoreButton.addEventListener('click', function() {\n  const query = searchInput.value.trim();\n  if (query) {\n    page++; \n    loadMoreImages(query);\n  }\n});\n\n// Axios kullanarak API çağrısı\nasync function fetchImages(query) {\n  loader.style.display = 'block';\n  gallery.innerHTML = ''; // Önceki sonuçları temizle\n  loadMoreButton.style.display = 'none'; // Daha fazla yükle butonunu gizle\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: apiKey,\n        q: query,\n        image_type: 'photo',\n        per_page: 40, \n        page: page\n      }\n    });\n\n    const data = response.data;\n    totalHits = data.totalHits; // Toplam sonuç sayısını al\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight'\n      });\n      return;\n    }\n\n    renderImages(data.hits);\n    loader.style.display = 'none';\n\n    // Eğer toplam sonuç sayısından daha az resim varsa \"Daha Fazla Yükle\" butonunu göster\n    if (page * 40 < totalHits) {\n      loadMoreButton.style.display = 'block';\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while loading images!',\n      position: 'topRight'\n    });\n    console.error(\"Error:\", error);\n    loader.style.display = 'none';\n  }\n}\n\n// Sayfalama için daha fazla yükle fonksiyonu\nasync function loadMoreImages(query) {\n  loader.style.display = 'block';\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: apiKey,\n        q: query,\n        image_type: 'photo',\n        per_page: 40, \n        page: page\n      }\n    });\n\n    const data = response.data;\n\n    renderImages(data.hits);\n    loader.style.display = 'none';\n\n    // Eğer toplam sonuçları aştıysak \"Daha Fazla Yükle\" butonunu gizle\n    if (page * 40 >= totalHits) {\n      loadMoreButton.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: 'You have reached the end of the results.',\n        position: 'topRight'\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while loading more images!',\n      position: 'topRight'\n    });\n    console.error(\"Error:\", error);\n    loader.style.display = 'none';\n  }\n}\n\n// Galeriye görselleri ekleme\nfunction renderImages(images) {\n  let imageMarkup = '';\n  images.forEach(image => {\n    imageMarkup += `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        <div class=\"image-info\">\n          <p>Likes: ${image.likes}</p>\n          <p>Views: ${image.views}</p>\n          <p>Comments: ${image.comments}</p>\n          <p>Downloads: ${image.downloads}</p>\n        </div>\n      </a>\n    `;\n  });\n\n  gallery.innerHTML += imageMarkup;\n  updateLightbox();\n}\n\n// SimpleLightbox'u güncelleyen fonksiyon\nlet lightbox = new SimpleLightbox('.gallery a');\nfunction updateLightbox() {\n  lightbox.refresh();\n}\n"],"names":["apiKey","searchInput","searchButton","gallery","loader","loadMoreButton","page","totalHits","query","fetchImages","iziToast","loadMoreImages","data","axios","renderImages","error","images","imageMarkup","image","updateLightbox","lightbox","SimpleLightbox"],"mappings":"owBAMA,MAAMA,EAAS,qCAETC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIC,EAAO,EACPC,EAAY,EAEhBL,EAAa,iBAAiB,QAAS,IAAM,CAC3C,MAAMM,EAAQP,EAAY,MAAM,KAAI,EAChCO,GACFF,EAAO,EACPG,EAAYD,CAAK,GAEjBE,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,oCACT,SAAU,UAChB,CAAK,CAEL,CAAC,EAEDL,EAAe,iBAAiB,QAAS,UAAW,CAClD,MAAMG,EAAQP,EAAY,MAAM,KAAI,EAChCO,IACFF,IACAK,EAAeH,CAAK,EAExB,CAAC,EAGD,eAAeC,EAAYD,EAAO,CAChCJ,EAAO,MAAM,QAAU,QACvBD,EAAQ,UAAY,GACpBE,EAAe,MAAM,QAAU,OAE/B,GAAI,CAWF,MAAMO,GAVW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKb,EACL,EAAGQ,EACH,WAAY,QACZ,SAAU,GACV,KAAMF,CACP,CACP,CAAK,GAEqB,KAGtB,GAFAC,EAAYK,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,CAC1BF,EAAS,MAAM,CACb,MAAO,QACP,QAAS,2EACT,SAAU,UAClB,CAAO,EACD,MACD,CAEDI,EAAaF,EAAK,IAAI,EACtBR,EAAO,MAAM,QAAU,OAGnBE,EAAO,GAAKC,IACdF,EAAe,MAAM,QAAU,QAElC,OAAQU,EAAO,CACdL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0CACT,SAAU,UAChB,CAAK,EACD,QAAQ,MAAM,SAAUK,CAAK,EAC7BX,EAAO,MAAM,QAAU,MACxB,CACH,CAGA,eAAeO,EAAeH,EAAO,CACnCJ,EAAO,MAAM,QAAU,QAEvB,GAAI,CAWF,MAAMQ,GAVW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKb,EACL,EAAGQ,EACH,WAAY,QACZ,SAAU,GACV,KAAMF,CACP,CACP,CAAK,GAEqB,KAEtBQ,EAAaF,EAAK,IAAI,EACtBR,EAAO,MAAM,QAAU,OAGnBE,EAAO,IAAMC,IACfF,EAAe,MAAM,QAAU,OAC/BK,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,2CACT,SAAU,UAClB,CAAO,EAEJ,OAAQK,EAAO,CACdL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACT,SAAU,UAChB,CAAK,EACD,QAAQ,MAAM,SAAUK,CAAK,EAC7BX,EAAO,MAAM,QAAU,MACxB,CACH,CAGA,SAASU,EAAaE,EAAQ,CAC5B,IAAIC,EAAc,GAClBD,EAAO,QAAQE,GAAS,CACtBD,GAAe;AAAA,iBACFC,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,sBAEpCA,EAAM,KAAK;AAAA,sBACXA,EAAM,KAAK;AAAA,yBACRA,EAAM,QAAQ;AAAA,0BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAIzC,CAAG,EAEDf,EAAQ,WAAac,EACrBE,GACF,CAGA,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAC9C,SAASF,GAAiB,CACxBC,EAAS,QAAO,CAClB"}